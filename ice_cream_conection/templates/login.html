{%  load static %}

<!doctype HTML>
<html>

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <link rel="stylesheet" href="{%  static 'css/bootstrap.css' %}">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue-deep_purple.min.css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
    <link rel="stylesheet" href="{%  static 'css/style.css' %}">
    <link rel="stylesheet" href="{%  static 'css/material.min.css' %}">
    <link rel="stylesheet" href="{%  static 'css/getmdl-select.scss' %}">
    <link rel="stylesheet" href="{%  static 'css/mdl-jquery-modal-dialog.css' %}">
    <title>Ice Cream CONEction - Login/Signup</title>
</head>

<body>
<div class="container">
    <div class="center-block">
        <div class="col-lg-4 col-lg-offset-1 col-md-4 col-md-offset-1 col-sm-12 col-xs-12 no-padding"
             style="z-index:1">
            <!-- Slider -->

            <div class="mlt-carousel">
                <div id="myCarousel" class="carousel slide carousel-fade" data-ride="carousel">
                    <div class="carousel-inner" role="listbox">
                        <div class="item active">
                            {#                                <img class="img-responsive center-block" src="img/step1.png" alt="step1">#}
                            <div class="item-content">
                                <h3>Ice Cream CONEction</h3>
                                <p>Consectetur adipiscing elit</p>
                                <p>Phasellus orci dolor</p>
                                <p>dapibus suscipit quam</p>
                            </div>
                        </div>
                        <div class="item">
                            <div class="item-content">
                                <h3>Consumer</h3>
                                <p>Laoreet placerat justo congue vulputate</p>
                                <p>Diam felis dapibus nulla</p>
                                <p>Phasellus molestie</p>
                            </div>
                        </div>
                        <div class="item">
                            <div class="item-content">
                                <h3>Producer</h3>
                                <p>ultricies posuere leo</p>
                                <p>Phasellus orci dolor</p>
                                <p>dapibus suscipit quam</p>
                            </div>
                        </div>
                    </div>
                    <!-- Indicators -->
                    <ol class="carousel-indicators">
                        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                        <li data-target="#myCarousel" data-slide-to="1"></li>
                        <li data-target="#myCarousel" data-slide-to="2"></li>
                    </ol>
                </div>
                <!--mlt-carousel-->
            </div>
            <!-- Slider -->
        </div>

        <div class="col-lg-6 col-lg-offset-right-1 col-md-6 col-md-offset-right-1 col-sm-12 col-xs-12 no-padding">
            <div class="mlt-content">
                <ul class="nav nav-tabs">
                    <li class="active"><a href="#" data-toggle="tab">Login / Signup</a></li>
                    {{ invalid_role }}
                </ul>

                <br/><br/>
                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select">
                    <input type="text" value="" class="mdl-textfield__input" id="choose_role" readonly>
                    <input type="hidden" value="" name="choose_role">
                    <label for="choose_role" class="mdl-textfield__label">Choose a role</label>
                    <ul for="choose_role" class="mdl-menu mdl-menu--bottom-left mdl-js-menu">
                        <li class="mdl-menu__item" data-val="driver">I am an ice cream truck driver</li>
                        <li class="mdl-menu__item" data-val="customer">I want ice cream</li>
                    </ul>
                    <span id="choose_role_error">Please select a role</span>
                    <span id="invalid_role_error">User email and role do not match</span>
                </div>

                <br/><br/>
                <div id="terms_flag_div">
                    <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="terms_flag">
                        <input type="checkbox" id="terms_flag" class="mdl-checkbox__input">
                        <span class="mdl-checkbox__label ">I have read and accept the
                            <a id="terms_flag_a_tag">Terms of Use</a> and <a href="# ">Privacy Policy</a></span>
                    </label>
                </div>

                <br/>
                <div>
                    <span id="terms_flag_error">Please accept the terms of use</span>
                </div>

                <br/><br/><br/>
                <div class="tab-content">
                    <div class="tab-pane fade in active" id="register">
                        <a href="{% url 'social:begin' 'google-oauth2' %}?next=/" id="google_login">
                            <img id="signInButton" src="{%  static 'images/btn_google_signin_dark_normal_web.png' %}">
                        </a>
                    </div>
                </div>
            </div>
            <!--Login-->
        </div>
        <!--center-block-->
    </div>
    <!--container-->
</div>

<script src="{%  static 'js/jquery.min.js' %}"></script>
<script src="{%  static 'js/bootstrap.min.js' %}"></script>
<script src="{%  static 'js/material.min.js' %}"></script>
<script src="{%  static 'js/getmdl-select.js' %}"></script>
<script src="{%  static 'js/mdl-jquery-modal-dialog.js' %}"></script>
<script src="{%  static 'js/cookie.js' %}"></script>
<script src="{%  static 'js/login-validate.js' %}"></script>


<script>
    //Google analytics.
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-79865537-1', 'auto');
    ga('send', 'pageview');
</script>

<script>
    $("#choose_role_error").hide();
    $("#terms_flag_error").hide();
    $("#invalid_role_error").hide();
    if (Cookies.get("icc_invalid_role") != null) {
        $("#invalid_role_error").show();
        Cookies.remove("icc_invalid_role");
    }
</script>

<script>
    var terms_text = 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.';
    $('#terms_flag_a_tag').click(function () {
        showDialog({
            title: 'Terms of Use',
            text: terms_text
        })
    });

    $("#choose_role").change(function () {
        $("#choose_role_error").hide();
        $("#invalid_role_error").hide();
        var href_val = $("#google_login").attr('href');
        if ($("#choose_role").val().indexOf("driver") >= 0) {
            $("#google_login").attr('href', href_val.split("?")[0] + "?next=dashboard/driver/")
        } else {
            $("#google_login").attr('href', href_val.split("?")[0] + "?next=dashboard/customer/")
        }
    });

    $("#terms_flag").change(function () {
        $("#terms_flag_error").hide();
    });

</script>

</body>

</html>
